<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mensagem Especial</title>

<style>
@import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');

*{margin:0; padding:0; box-sizing:border-box;}

/* ===== FUNDO ===== */
body{
min-height: 100vh;
min-height: -webkit-fill-available; 
background:
linear-gradient(rgba(255,255,255,.35), rgba(255,255,255,.35)),
url("https://images.unsplash.com/photo-1441974231531-c6227db76b6e");
background-size:cover;
background-position:center;
background-repeat:no-repeat;
display:flex;
justify-content:center;
align-items:flex-end;
font-family:'Press Start 2P', monospace;
overflow:hidden;
}

/* ===== CORA√á√ïES ===== */
.coracoes{
position:fixed;
top:0;
left:0;
width:100%;
height:100%;
pointer-events:none;
z-index:1;
}

.heart{
position:absolute;
bottom:-60px;
font-size:clamp(18px,5vw,28px);
animation:subir linear infinite;
}

@keyframes subir{
0%{transform:translateY(0) scale(.8);opacity:0;}
15%{opacity:1;}
100%{transform:translateY(-120vh) scale(1.2);opacity:0;}
}

/* ===== TELA PRINCIPAL ===== */
.tela{
position:relative;
width:90%;
max-width:520px;
display:flex;
flex-direction:column;
justify-content:center;
align-items:center;
gap:30px;
z-index:2;
text-align: center;
}

/* ===== PLAYER ===== */
.personagem{
display:flex;
flex-direction:column;
justify-content:center;
align-items:center;
gap:15px;
width: 100%;
}

.trilha-texto{
font-size:12px;
color:#ffe4ec;
text-shadow:0 0 6px rgba(255,180,200,.6);
letter-spacing:2px;
margin-bottom: 5px;
}

.play-btn, #dicasBtn{
background:linear-gradient(45deg,#ff9a9e,#fad0c4);
border:none;
color:white;
font-family:'Press Start 2P', monospace;
font-size:13px;
padding:16px 30px;
border-radius:999px;
cursor:pointer;
box-shadow:0 4px 18px rgba(255,150,170,.5);
transition:.25s;
}

.play-btn:hover, #dicasBtn:hover{
transform:scale(1.05);
box-shadow:0 6px 22px rgba(255,150,170,.8);
}

/* ===== DIALOGO ===== */
.dialogo{
position:relative; 
width:100%;
background:#f8f8f8;
border:6px solid #3a6ea5;
border-radius:22px;
padding:20px 15px;
box-shadow:0 4px 20px rgba(0,0,0,.15);
cursor:pointer;
display:none; /* s√≥ aparece ap√≥s a m√∫sica acabar */
align-items:center;       
justify-content:center;  
min-height:50px;         
}

.texto{
font-size:11px;
line-height:1.7;
color:#333;
text-align:center;
}

.seta{
position:absolute;
bottom:8px;
right:12px;
font-size:16px;
animation:piscando 1s infinite;
}

@keyframes piscando {
  0%, 100% { opacity: 1; }
  50% { opacity: 0; }
}

#dicasBtn{
display:none;
margin-top:15px;
}

/* ===== MOBILE ADJUSTMENTS ===== */
@media(max-width:480px){
  body {
    padding: 20px;
    justify-content: center; /* centraliza verticalmente */
  }
  .tela {
    height: 100%; 
    gap: 30px;
  }
  .trilha-texto{font-size:11px;}
  .play-btn, #dicasBtn{font-size:11px; width: 80%;}
  .texto{font-size:10px;}
}
</style>
</head>

<body>

<div class="coracoes">
<div class="heart" style="left:8%; animation-duration:7s;">üíñ</div>
<div class="heart" style="left:20%; animation-duration:6s; animation-delay:1s;">üíó</div>
<div class="heart" style="left:32%; animation-duration:8s; animation-delay:2s;">üíì</div>
<div class="heart" style="left:48%; animation-duration:7s; animation-delay:3s;">üíï</div>
<div class="heart" style="left:62%; animation-duration:6s; animation-delay:2s;">üíò</div>
<div class="heart" style="left:75%; animation-duration:9s; animation-delay:4s;">üíû</div>
<div class="heart" style="left:88%; animation-duration:7s; animation-delay:1s;">‚ù§Ô∏è</div>
</div>

<div class="tela">
    <div class="personagem">
        <div class="trilha-texto">Ou√ßa a m√∫sica at√© o fim...</div>
        <button class="play-btn" id="playBtn">‚ñ∂ PLAY</button>
        <audio id="musica">
            <source src="musica.mp3" type="audio/mpeg">
        </audio>
    </div>

    <div class="dialogo" id="dialogo">
        <div class="texto" id="texto"></div>
        <div class="seta">‚ñº</div>
    </div>

    <button id="dicasBtn" onclick="window.location.href='segunda.html'">Ir para as dicas</button>
</div>

<script>
const linhas = [
"Ainda sei bem pouco sobre voc√™‚Ä¶",
"Mas o pouco que sei me deixou curioso e encantado.",
"Sua vibe de quem gosta de aproveitar e viver cada momento ‚Äî",
"Pequenos gestos, sorrisos e jeitos que fazem tudo parecer m√°gico.",
"Voc√™ n√£o precisa de grandes gestos; s√£o as pequenas atitudes que provocam seu sorriso sincero.",
"√â incr√≠vel como sua presen√ßa transforma o ambiente.",
"Quer descobrir quem te enviou essas flores?"
];

let indexLinha = 0;
let digitando = false;

const textoEl = document.getElementById("texto");
const dialogoEl = document.getElementById("dialogo");
const musica = document.getElementById("musica");
const playBtn = document.getElementById("playBtn");
const dicasBtn = document.getElementById("dicasBtn");

// Fun√ß√£o para digitar o texto linha por linha
function digitarLinha(linha) {
    digitando = true;
    textoEl.innerHTML = ""; 
    let i = 0;
    const intervalo = setInterval(() => {
        textoEl.innerHTML += linha[i];
        i++;
        if (i >= linha.length) {
            clearInterval(intervalo);
            digitando = false;
            if(indexLinha >= linhas.length){
                dicasBtn.style.display = "inline-block";
            }
        }
    }, 50);
}

// Clique no bal√£o de texto
dialogoEl.addEventListener("click", () => {
    if (digitando) return;
    if (indexLinha < linhas.length) {
        digitarLinha(linhas[indexLinha]);
        indexLinha++;
    }
});

// Tocar / pausar m√∫sica
function tocarMusica(){
  if(musica.paused){
    musica.play();
    playBtn.innerText = "‚è∏ PAUSE";
  } else {
    musica.pause();
    playBtn.innerText = "‚ñ∂ PLAY";
  }
}

playBtn.addEventListener("click", tocarMusica);

// Quando a m√∫sica termina
musica.addEventListener("ended", () => {
    // Mostrar o bal√£o de texto
    dialogoEl.style.display = "flex"; 
    textoEl.innerHTML = "Clique para ler a mensagem...";

    // Mudar m√∫sica para fundo ambiente em loop
    musica.volume = 0.15; 
    musica.loop = true;
    musica.play();
    playBtn.style.display = "none"; // Esconde bot√£o Play
    document.querySelector('.trilha-texto').innerText = "Tocando ao fundo...";
});
</script>

</body>
</html>
